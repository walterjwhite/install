#!/bin/sh

_APPLICATION_NAME=$(basename $(pwd))

_BIN_PATH="/usr/local/bin"
_LIBRARY_PATH="/usr/local/share"

_APPLICATION_TEMP_PATH=/tmp/$_APPLICATION_NAME

mkdir -p $_APPLICATION_TEMP_PATH
cp -R bin lib $_APPLICATION_TEMP_PATH

_SED_LIBRARY_PATH=$(echo $_LIBRARY_PATH | sed -e "s/\//\\\\\//g")

gsed -i "s/_LIBRARY_PATH/$_SED_LIBRARY_PATH/g" $(find $_APPLICATION_TEMP_PATH -type f)
gsed -i "s/_APPLICATION_NAME/$_APPLICATION_NAME/g" $(find $_APPLICATION_TEMP_PATH -type f)

mkdir -p $_LIBRARY_PATH/$_APPLICATION_NAME

mv $_APPLICATION_TEMP_PATH/bin/* $_BIN_PATH
mv $_APPLICATION_TEMP_PATH/lib/* $_LIBRARY_PATH/$_APPLICATION_NAME
rm -rf $_APPLICATION_TEMP_PATH
